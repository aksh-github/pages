(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&p(u)}).observe(document,{childList:!0,subtree:!0});function l(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function p(r){if(r.ep)return;r.ep=!0;const a=l(r);fetch(r.href,a)}})();function vt(){let s=[],i;return function(l,p){const r=p.some((a,u)=>a!==s[u]);(!s.length||r)&&(i&&i(),i=l(),s=p)}}function Vt(s,i){let l;return function(...p){const r=()=>(l=null,s.apply(this,p));clearTimeout(l),l=setTimeout(r,i)}}const B=new Set,yt=new Set,N=(()=>{let s=null;const i=k=>{s=k},l=k=>{console.warn("untested code"),u=!0,k(),u=!1,a()},p=k=>{o=!0,k(),o=!1};let r=null,a=()=>{},u=!1,o=!1;const h=(k,y=100)=>{a=k,r=Vt(a,y)},A=k=>{let y={...k},T=s;return[O=>O?y[O]:y,O=>{if(typeof O=="function")y=O(y);else{if(y==O)return;y={...O}}u?T&&B.add(T):o||(T&&B.add(T),r())}]},j=k=>{let y=k,T=s;return[()=>y,O=>{if(typeof O=="function")y=O(y);else{if(y==O)return;y=O}u?T&&B.add(T):o||(T&&B.add(T),r())}]};return{batch:l,registerCallback:h,state:A,atom:j,context:k=>{const[y,T]=j(k);return{get:()=>y(),set:J=>{const $=y();p(()=>T(J)),$!==y()&&(yt.add(y()),r())}}},skipUpdate:p,setCurrComp:i}})(),_t=N.registerCallback,st=N.atom,qt=N.skipUpdate,mt=N.setCurrComp,Bt=N.context,R=console.log,K=document;R("check https://github.com/pomber/incremental-rendering-demo");const w=(()=>{let s=[],i={},l={},p=[],r=null,a=null,u=null;function o(){const t=new WeakMap;return{registerEventListener:(e,n,c,g)=>{t.has(e)||t.set(e,[]),t.get(e).push({type:n,listener:c,options:g})},unregisterEventListener:e=>{if(t.has(e)){const n=t.get(e);for(;n.length;){const{type:c,listener:g,options:C}=n.pop();e.removeEventListener(c,g,C)}}},getEventListeners:e=>t.get(e)||[],unRegisterAllEventListeners:async e=>{const n=Ct(e);for(let c=0;c<n.length;c++)h.unregisterEventListener(n[c]),n[c]=null,c%50===0&&await Kt()}}}const h=new o;let A=null,j=null;function U(t){A=t}function k(t){j=t}function y(){Object.keys(l).forEach(t=>{var e,n;i[t]||((n=(e=l[t]).unMount)==null||n.call(e),l[t].unMount=null,gt[t]&&delete gt[t])})}function T(){for(;s!=null&&s.length;)s.pop()()}function J(t,...e){return e}function $(t,e,...n){var C,x,v,W;let c=null,g;if(Array.isArray(n)&&(n=n.flat()),typeof t=="function"){g=(C=p[p.length-1])==null?void 0:C.n,p.push({n:t==null?void 0:t.name});const I=`${t.name}:${g}:${e==null?void 0:e.key}`;if(l){const q=l[I];q?(c=q.fn,A=q.mount,j=q.unMount):(mt(I),c=t(e,...n),A&&s.push(A),mt(null))}i[I]={fname:t.name,fn:c,mount:A,unMount:j,p:g,key:e==null?void 0:e.key},A=j=null;const b=typeof c=="function"?c({...e,children:n}):c;return p.pop(),b!=null&&b.type?(b.type==="df"&&(e={...e,fragChildLen:b==null?void 0:b.children.length}),{...b,$c:t.name,children:[b],$p:g,key:e==null?void 0:e.key,props:e||{},type:"df"}):Array.isArray(b)?(console.warn("Your component named `",t.name,"` is returning Array, manipulation to this Array is currently NOT supported and can lead to Unexpected behavior"),{$c:t.name,type:"df",children:b,$p:g}):b!=null&&b.$c?{$c:t.name,children:[b],$p:g}:{$c:t.name,value:b,props:e||{},$p:g}}if(t==="df"){let I=0;for(let b=0;b<n.length;++b)((x=n[b])==null?void 0:x.type)==="df"?I+=((W=(v=n[b])==null?void 0:v.props)==null?void 0:W.fragChildLen)||0:I+=1;return{type:t,props:{...e,fragChildLen:I},children:n}}else return{type:t,props:e||{},children:t!=null&&t.includes("-")||e!=null&&e.ignoreNode||(t==null?void 0:t.toLowerCase())==="iframe"?[]:n}}function O(t,e,n){n?(t.setAttribute(e,n),t[e]=!0):t[e]=!1}function St(t,e){t.removeAttribute(e),t[e]=!1}function ot(t){return/^on/.test(t)}function Lt(t){return t.slice(2).toLowerCase()}function ut(t){return ot(t)||t==="fragChildLen"||t==="fallback"}function at(t,e,n){ut(e)||(e==="className"?t.setAttribute("class",n):e==="style"?Object.keys(n).forEach(c=>{t.style[c]=n[c]}):e==="ref"?n==null||n(t):e==="ignoreLater"?(t.setAttribute("ignorenode",!0),t.removeAttribute(e.toLowerCase())):typeof n=="boolean"?O(t,e,n):((e==="value"||e==="htmlFor")&&(t[e]=n,setTimeout(()=>{t[e]=n},0)),t.setAttribute(e,n)))}function Pt(t,e,n){ut(e)||(e==="className"?t.removeAttribute("class"):typeof n=="boolean"?St(t,e):t.removeAttribute(e))}function At(t,e){Object.keys(e).forEach(n=>{at(t,n,e[n])})}function kt(t,e,n,c){!n&&n==null?Pt(t,e,c):(!c||n!==c)&&at(t,e,n)}function Tt(t,e,n={}){const c=Object.assign({},e,n);Object.keys(c).forEach(g=>{kt(t,g,e[g],n[g])})}function dt(t,e){Object.keys(e).forEach(n=>{if(ot(n)){const c=Lt(n);h.registerEventListener(t,c,e[n]),t.addEventListener(c,e[n],!0)}})}const ft="http://www.w3.org/2000/svg",Ot=(t,e,...n)=>{function c(C,x){Object.keys(x).forEach(v=>{C.setAttributeNS(null,v,x[v])})}const g=K.createElementNS(ft,"svg");c(g,e);for(const C of n){const x=K.createElementNS(ft,C.type);c(x,C.props),g.appendChild(x)}return g};function M(t){if(!(t!=null&&t.type))return t!=null&&t.$c?t.children?M(t.children[0]):K.createTextNode((t==null?void 0:t.value)==null||(t==null?void 0:t.value)==null?"":t==null?void 0:t.value):K.createTextNode(t==null||t==null?"":t);if((t==null?void 0:t.type)==="df"){const n=K.createDocumentFragment();return t.children.map(M).forEach(n.appendChild.bind(n)),n}if(t.type==="svg")return Ot(t.type,t.props,...t.children);const e=K.createElement(t.type);return t!=null&&t.$c||(At(e,t.props),dt(e,t.props)),t.children.map(M).forEach(e.appendChild.bind(e)),e}function Rt(t,e){var n,c;return(t==null?void 0:t.type)===(e==null?void 0:e.type)&&(t==null?void 0:t.type)==="df"?(t==null?void 0:t.$c)!==(e==null?void 0:e.$c):typeof t!=typeof e||!(t!=null&&t.type)&&t!==e||(t==null?void 0:t.type)!==(e==null?void 0:e.type)||(t==null?void 0:t.value)!==(e==null?void 0:e.value)||((n=t==null?void 0:t.props)==null?void 0:n.name)!==((c=e==null?void 0:e.props)==null?void 0:c.name)}function jt(t,e){r=t,a=e,u=a(),R(u),R(i),r.firstChild?r.replaceChild(M(u),r.firstChild):r.appendChild(M(u)),T(),l={...i},i={}}let D=[],tt=[];function Dt(){let t=a();R(u,t),R(i),R(performance.now()),D=[],tt=[],xt(r,t,u),R(performance.now());let e=setTimeout(()=>{clearTimeout(e),y(),tt&&It(tt),D&&Mt(D),T(),u=t,l={...i},i={}},0)}function pt(t){return t!==void 0||t!==""}const Y={routeChange:!1,set:t=>{Y.routeChange=t}};window.addEventListener("popstate",()=>Y.set(!0)),window.addEventListener("navigate",()=>Y.set(!0));function xt(t,e,n,c=0){let g=Ct(r),C=0,x=null,v=!1,W=null,I=0;Y.routeChange&&(B.clear(),Y.set(!1));const b=B.size;let q=null,Q=!1,F=0,et=0;function nt(f,S,L,H=0){var X;if(!Q&&b){if(S!=null&&S.type&&(L!=null&&L.type))return ht(S,L);if(S===L)return}if(I++,!pt(L))R("append: "),D.push({p:f,op:"APPEND",c:M(S)});else if(pt(S))if(Rt(S,L))if(f!=null&&f.childNodes[H]){const E=f.childNodes[H];if(D.push({p:f,op:"REPLACE",c:[M(S),E]}),(E==null?void 0:E.nodeType)===1){for(;C<g.length;)if(C++,g[C]===E){const P=E.querySelectorAll("*").length;g.splice(C,P);break}}const z=(X=L==null?void 0:L.props)==null?void 0:X.fragChildLen;if((L==null?void 0:L.type)==="df"&&z)for(let P=z-1;P>=1;--P)D.push({p:f,op:"REMOVE",c:f.childNodes[H+P]}),C+=1}else if(f!=null&&f.appendChild){const E=M(S);E!=null&&E.nodeName?v?D.push({p:W,op:"APPEND",c:E}):D.push({p:f,op:"APPEND",c:E}):D.push({p:f,op:"CONTENT",c:E==null?void 0:E.textContent})}else D.push({p:f==null?void 0:f.parentNode,op:"APPEND",c:M(S)});else S!=null&&S.type&&ht(S,L);else{const E=f.childNodes[H];if(D.push({p:f,op:"REMOVE",c:E}),(E==null?void 0:E.nodeType)===1){for(;C<g.length;)if(C++,g[C]===E){const z=E.querySelectorAll("*").length;g.splice(C,z);break}}}}function ht(f,S){var H,X,E,z;if((f==null?void 0:f.type)!=="df")C+=1;else{q=`${f.$c}:${f.$p}:${f.key}`;let P=q.split(":")[0];(B.has(q)||f.$p===P||f.key!==(S==null?void 0:S.key))&&(Q=!0)}if(Q&&F===0){R(f.props);const{fragChildLen:P}=f.props;if(P){let V=C+1;for(let _=0;_<P;++_){let it=0;R("qc: ",V);const ct=g[V];it=(ct==null?void 0:ct.querySelectorAll("*").length)||0,F+=it,V+=1+it}et=C+P+F+1}else F+=((H=g[C+1])==null?void 0:H.querySelectorAll("*").length)||0,R("comparisonsReqd till: ",g[C+F+1]),et=C+F+1}const L=g[C];if(C===et&&(Q=!1,F=0,et=0),x!==L){const P=Object.keys(f.props).length,V=Object.keys(S.props).length;if(!(P===V&&P===0)){if(f.props.ignoreNode||f.props.ignoreLater)return;tt.push({$target:L,newProps:f.props,oldProps:S.props})}x=L}if((X=f==null?void 0:f.props)!=null&&X.cacheKey){const P=(z=(E=f.children[0])==null?void 0:E.props)==null?void 0:z.__cached,V=P?S.children[0]:null;b&&!P&&(Q=!0),nt(g[++C],f.children[0],V,0);return}else{const P=f.children.length,V=S.children.length;P>100&&(v=!0,W=K.createDocumentFragment(),R("have for loop custom component or see how this can be optimized"));for(let _=0;_<P||_<V;_++)nt(L,f.children[_],S.children[_],_)}v&&(R("after for",L),D.push({p:L,op:"APPEND",c:W}),v=!1,W=null)}nt(t,e,n,c),B.clear(),yt.clear(),R(I),I=0}function It(t){for(;t.length;){const e=t.shift();Tt(e.$target,e.newProps,e.oldProps),e.$target=null,e.newProps=null,e.oldProps=null}}function Mt(t){var e,n;for(;t.length;){const c=t.shift();switch(c.op){case"APPEND":c.p.appendChild(c.c),c.c=null,c.p=null,c.op=null;break;case"REMOVE":c.p.removeChild(c.c),((e=c.c)==null?void 0:e.nodeType)===1&&requestIdleCallback(()=>{h.unRegisterAllEventListeners(c.c),c.c=null,c.p=null,c.op=null});break;case"REPLACE":c.p.replaceChild(c.c[0],c.c[1]),((n=c.c[1])==null?void 0:n.nodeType)===1&&requestIdleCallback(()=>{h.unRegisterAllEventListeners(c.c[1]),c.c=null,c.p=null,c.op=null});break;case"CONTENT":c.p.textContent=c.c,c.c=null,c.p=null,c.op=null;break}}}return{mount:jt,forceUpdate:Dt,onMount:U,onCleanup:k,h:$,df:J,createElement:M}})(),Ut=w.mount,Wt=w.forceUpdate,Ft=w.onMount,Ht=w.onCleanup,m=w.h,gt={};function zt(s){return s.tagName.includes("-")}function Ct(s){let i=[s],l=s;function p(){for(;l;){const a=!(l!=null&&l.getAttribute("ignorenode")||l.tagName==="IFRAME"||zt(l));l.firstElementChild&&a?(l=l.firstElementChild,i.push(l)):r()}}function r(){for(;l;){if(l.nextElementSibling){l=l.nextElementSibling,i.push(l);return}l=l.parentElement,l===s&&(l=null)}}return p(),i}function Kt(){var s;return(s=globalThis.scheduler)!=null&&s.yield?scheduler.yield():new Promise(i=>{setTimeout(i,0)})}class Gt extends HTMLElement{constructor(){super();const i=this.attachShadow({mode:"open"}),l=document.createElement("div");l.textContent="Hello from Web Component!",l.style.color="blue",i.appendChild(l)}connectedCallback(){console.log("Web Component mounted!")}disconnectedCallback(){console.log("Web Component unmounted!")}static get observedAttributes(){return["message"]}attributeChangedCallback(i,l,p){i==="message"&&(this.shadowRoot.querySelector("div").textContent=p)}}customElements.define("hole-component",Gt);var Jt={VITE_VERBS:"/verbs.json",VITE_WORDS:"/words.json",VITE_BASEPATH:"https://aksh-github.github.io/pages/data/sanskrit/db",VITE_TS:"/data-ts.json",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Z=Jt,$t=()=>{var i;const s=(((i=window==null?void 0:window.location)==null?void 0:i.host)||"localhost")+":sans:";return{updateData:(l,p)=>{localStorage.setItem(s+l,JSON.stringify({ts:Date.now(),d:p}))},get:l=>JSON.parse(localStorage.getItem(s+l))}},lt={VERBS:0,WORDS:1},G={words:{d:[],ts:0},verbs:{d:[],ts:0}};let rt=null;const bt=Bt(""),Yt=()=>({row:s})=>{var i,l,p,r,a,u;return m("div",{className:"divrow"},m("h3",null,s==null?void 0:s.ev),m("p",null," ",(i=s==null?void 0:s.sv)==null?void 0:i.join(", ")),m("p",null,(l=s==null?void 0:s.gana)==null?void 0:l.join(", ")),m("p",null,(p=s==null?void 0:s.roop)==null?void 0:p.join(", ")),m("p",null,(r=s==null?void 0:s.lyut)==null?void 0:r.join(", ")),m("p",null,(a=s==null?void 0:s.kta)==null?void 0:a.join(", ")),m("p",null,(u=s==null?void 0:s.mv)==null?void 0:u.join(", ")))},Qt=s=>{var p,r,a,u,o;let i=(r=(p=rt[0]())==null?void 0:p.trim())==null?void 0:r.toLowerCase(),l=(a=s==null?void 0:s.ev)==null?void 0:a.includes(i);if(!l){for(let h=0;h<((u=s==null?void 0:s.sv)==null?void 0:u.length);h++)if((s==null?void 0:s.sv[h].indexOf(i))>-1){l=!0;break}}if(!l){for(let h=0;h<((o=s==null?void 0:s.mv)==null?void 0:o.length);h++)if((s==null?void 0:s.mv[h].indexOf(i))>-1){l=!0;break}}return l},Xt=()=>({row:s})=>{var i,l;return m("li",null,m("h3",null,s==null?void 0:s.ew),m("p",null,(i=s==null?void 0:s.sw)==null?void 0:i.join(", ")),m("p",null,(l=s==null?void 0:s.mw)==null?void 0:l.join(", ")))},Zt=s=>{var p,r,a,u,o;let i=(r=(p=rt[0]())==null?void 0:p.trim())==null?void 0:r.toLowerCase(),l=(a=s==null?void 0:s.ew)==null?void 0:a.includes(i);if(!l){for(let h=0;h<((u=s==null?void 0:s.sw)==null?void 0:u.length);h++)if((s==null?void 0:s.sw[h].indexOf(i))>-1){l=!0;break}}if(!l){for(let h=0;h<((o=s==null?void 0:s.mw)==null?void 0:o.length);h++)if((s==null?void 0:s.mw[h].indexOf(i))>-1){l=!0;break}}return l},d={[lt.VERBS]:{title:"Verbs",dkey:"verbs",jsonFile:Z.VITE_VERBS,filterFunc:Qt,RowComponent:Yt},[lt.WORDS]:{title:"Words",dkey:"words",jsonFile:Z.VITE_WORDS,filterFunc:Zt,setDatacb:s=>s["Everyday words"].concat(s.home).concat(s["eng other"]),RowComponent:Xt,asList:!0}},Et=(s=!1)=>{const{updateData:i,get:l}=$t(),p=[],r=[];return Object.keys(d).forEach(a=>{const u=l(`${d[a].dkey}`);if(!u||s)p.push(Nt(d[a].jsonFile)),r.push(d[a].dkey);else{const{ts:o,d:h}=u;p.push(Promise.resolve({ts:o,d:h||[]}))}}),Promise.all(p).then(a=>{Object.keys(d).forEach(u=>{var h,A,j,U;let o=((h=a[u])==null?void 0:h.d)||a[u];o=d[u].setDatacb&&!(o!=null&&o.length)?d[u].setDatacb(o):o,(A=o==null?void 0:o.shift)==null||A.call(o),(j=o==null?void 0:o.shift)==null||j.call(o),r.includes(d[u].dkey)&&requestIdleCallback(()=>{i(`${d[u].dkey}`,o),r.splice(r.indexOf(d[u].dkey),1)}),G[`${d[u].dkey}`].d=o,G[`${d[u].dkey}`].ts=((U=a[u])==null?void 0:U.ts)||0})})},Nt=s=>fetch(`${Z.VITE_BASEPATH}${s}`).then(i=>i.json());function wt({dkey:s}){let i=()=>[];const l=vt(),p=-1,[r,a]=st(G[`${s}`].d.slice(0,p));return({prop:u,search:o,dkey:h})=>{const{title:A,filterFunc:j,RowComponent:U,asList:k}=d[u];l(()=>(console.log("search now",o),o?i=()=>G[`${h}`].d.filter(j):i=()=>[],()=>{console.log("cleanup for",h,"with search",o),i=()=>[]}),[o]),console.log("exec",bt.get());const y=(i().length>0?i():r()).map(T=>m(U,{row:T}));return m("div",null,m("h2",{className:"title"},A),i().length===0&&o?m("p",{className:"info"},'No results for your search: "',o,'"'):null,i().length>0&&o?m("p",{className:"info"},"Matching results: ",i().length):null,k?m("ul",{className:"list"},y):m("div",{className:"search"},y))}}function te(){const[s,i]=st(0),[l,p]=st(!1);let r=null;const[a,u]=rt=st("");return Ft(()=>{console.log("mount for Sans"),Et().then(()=>{p(!0),fetch(`${Z.VITE_BASEPATH}${Z.VITE_TS}?ts=${Date.now()}`).then(o=>o.json()).then(o=>{let h=0;Object.keys(G).forEach(A=>{G[A].ts<o[A]&&(console.log("update for",A),h+=1)}),h>0&&Et(!0)})}).catch(o=>{console.log(o),l(!0)})}),Ht(()=>{console.log("unmount for Sans"),qt(()=>u(""))}),o=>m("div",{className:"sans"},m("header",{className:"sticky-header"},m("h1",{className:"main-head"},"संस्कृतकोष:"),m("div",{style:{textAlign:"center"},className:"search-box"},m("input",{value:a(),ref:h=>r=h,type:"search",name:"search",placeholder:"Search in English or Sanskrit...",onInput:h=>{u(h.target.value)}}),m("button",{className:"clear-search",onClick:()=>{u(""),r==null||r.focus()}},"x")),m("p",{className:"tabs"},m("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),i(lt.VERBS)}},"Verbs"),m("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),i(lt.WORDS)}},"Words"))),l()?m("div",{className:"search-wrapper"},m(ee,{contextdf:bt.get()},m(wt,{key:d[s()].dkey,dkey:d[s()].dkey,prop:s(),search:a()}))):m("p",null,"Loading..."))}const ee=()=>({children:s})=>m("div",null,s),se=document.getElementById("root-vdom");_t(Wt);Ut(se,()=>m(te,null));
