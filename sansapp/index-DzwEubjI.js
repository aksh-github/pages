(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))p(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&p(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function p(c){if(c.ep)return;c.ep=!0;const f=n(c);fetch(c.href,f)}})();function It(s,r){let n;return function(...p){const c=()=>(n=null,s.apply(this,p));clearTimeout(n),n=setTimeout(c,r)}}const q=new Set,it=new Set,$=(()=>{let s=null;const r=A=>{s=A},n=A=>{console.warn("untested code"),o=!0,A(),o=!1,f()},p=A=>{u=!0,A(),u=!1};let c=null,f=()=>{},o=!1,u=!1;const h=(A,S=100)=>{f=A,c=It(f,S)},R=A=>{let S={...A},L=s;return[T=>T?S[T]:S,T=>{if(console.log("update in state",L),typeof T=="function")S=T(S);else{if(S==T)return;S={...T}}o?L&&q.add(L):u||(L&&q.add(L),c())}]},j=A=>{let S=A,L=s;return[()=>S,T=>{if(console.log("update in atom",L),typeof T=="function")S=T(S);else{if(S==T)return;S=T}o?L&&q.add(L):u||(L&&q.add(L),c())}]};return{batch:n,registerCallback:h,state:R,atom:j,context:A=>{const[S,L]=j(A);return{get:()=>S(),set:J=>{const Y=S();p(()=>L(J)),Y!==S()&&(it.add(S()),c())}}},skipUpdate:p,setCurrComp:r}})(),_t=$.registerCallback,et=$.atom,Mt=$.skipUpdate,ht=$.setCurrComp,Vt=$.context,O=console.log;O("check https://github.com/pomber/incremental-rendering-demo");const N=(()=>{let s=[],r={},n={},p=[],c=null,f=null,o=null;function u(){const t=new WeakMap;return{registerEventListener:(e,l,i,g)=>{t.has(e)||t.set(e,[]),t.get(e).push({type:l,listener:i,options:g})},unregisterEventListener:e=>{if(t.has(e)){const l=t.get(e);for(;l.length;){const{type:i,listener:g,options:E}=l.pop();e.removeEventListener(i,g,E)}}},getEventListeners:e=>t.get(e)||[],unRegisterAllEventListeners:async e=>{const l=gt(e);for(let i=0;i<l.length;i++)h.unregisterEventListener(l[i]),l[i]=null,i%50===0&&await Wt()}}}const h=new u;let R=null,j=null;function B(t){R=t}function A(t){j=t}function S(){Object.keys(n).forEach(t=>{var e,l;r[t]||((l=(e=n[t]).unMount)==null||l.call(e),n[t].unMount=null,mt[t]&&delete mt[t])})}function L(){for(;s!=null&&s.length;)s.pop()()}function J(t,...e){return e}function Y(t,e,...l){var E,D,_,W;let i=null,g;if(Array.isArray(l)&&(l=l.flat()),typeof t=="function"){g=(E=p[p.length-1])==null?void 0:E.n,p.push({n:t==null?void 0:t.name});const I=`${t.name}:${g}:${e==null?void 0:e.key}`;if(n){const U=n[I];U?(i=U.fn,R=U.mount,j=U.unMount):(ht(I),i=t(e,...l),R&&s.push(R),ht(null))}r[I]={fname:t.name,fn:i,mount:R,unMount:j,p:g,key:e==null?void 0:e.key},R=j=null;const y=typeof i=="function"?i({...e,children:l}):i;return p.pop(),y!=null&&y.type?(y.type==="df"&&(e={...e,fragChildLen:y==null?void 0:y.children.length}),{...y,$c:t.name,children:[y],$p:g,key:e==null?void 0:e.key,props:e||{},type:"df"}):Array.isArray(y)?(console.warn("Your component named `",t.name,"` is returning Array, manipulation to this Array is currently NOT supported and can lead to Unexpected behavior"),{$c:t.name,type:"df",children:y,$p:g}):y!=null&&y.$c?{$c:t.name,children:[y],$p:g}:{$c:t.name,value:y,props:e||{},$p:g}}if(t==="df"){let I=0;for(let y=0;y<l.length;++y)((D=l[y])==null?void 0:D.type)==="df"?I+=((W=(_=l[y])==null?void 0:_.props)==null?void 0:W.fragChildLen)||0:I+=1;return{type:t,props:{...e,fragChildLen:I},children:l}}else return{type:t,props:e||{},children:e!=null&&e.ignoreNode?[]:l}}function T(t,e,l){l?(t.setAttribute(e,l),t[e]=!0):t[e]=!1}function Ct(t,e){t.removeAttribute(e),t[e]=!1}function rt(t){return/^on/.test(t)}function St(t){return t.slice(2).toLowerCase()}function ot(t){return rt(t)||t==="forceUpdate"}function ut(t,e,l){ot(e)||(e==="className"?t.setAttribute("class",l):e==="style"?Object.keys(l).forEach(i=>{t.style[i]=l[i]}):e==="ref"?l==null||l(t):e==="ignoreLater"?(t.setAttribute("ignorenode",!0),t.removeAttribute(e.toLowerCase())):typeof l=="boolean"?T(t,e,l):((e==="value"||e==="htmlFor")&&(t[e]=l),t.setAttribute(e,l)))}function bt(t,e,l){ot(e)||(e==="className"?t.removeAttribute("class"):typeof l=="boolean"?Ct(t,e):t.removeAttribute(e))}function Pt(t,e){Object.keys(e).forEach(l=>{ut(t,l,e[l])})}function Lt(t,e,l,i){!l&&l==null?bt(t,e,i):(!i||l!==i)&&ut(t,e,l)}function dt(t,e,l={}){const i=Object.assign({},e,l);Object.keys(i).forEach(g=>{Lt(t,g,e[g],l[g])})}function At(t,e){Object.keys(e).forEach(l=>{if(rt(l)){const i=St(l);h.registerEventListener(t,i,e[l]),t.addEventListener(i,e[l])}})}const kt=(t,e,...l)=>{function i(E,D){Object.keys(D).forEach(_=>{E.setAttributeNS(null,_,D[_])})}const g=document.createElementNS("http://www.w3.org/2000/svg","svg");i(g,e);for(const E of l){const D=document.createElementNS("http://www.w3.org/2000/svg",E.type);i(D,E.props),g.appendChild(D)}return g};function M(t){if(!(t!=null&&t.type))return t!=null&&t.$c?t.children?M(t.children[0]):document.createTextNode((t==null?void 0:t.value)==null||(t==null?void 0:t.value)==null?"":t==null?void 0:t.value):document.createTextNode(t==null||t==null?"":t);if((t==null?void 0:t.type)==="df"){const l=document.createDocumentFragment();return t.children.map(M).forEach(l.appendChild.bind(l)),l}if(t.type==="svg")return kt(t.type,t.props,...t.children);const e=document.createElement(t.type);return t!=null&&t.$c||(Pt(e,t.props),At(e,t.props)),t.children.map(M).forEach(e.appendChild.bind(e)),e}function Tt(t,e){return(t==null?void 0:t.type)===(e==null?void 0:e.type)&&(t==null?void 0:t.type)==="df"?(t==null?void 0:t.$c)!==(e==null?void 0:e.$c):typeof t!=typeof e||!(t!=null&&t.type)&&t!==e||(t==null?void 0:t.type)!==(e==null?void 0:e.type)||(t==null?void 0:t.value)!==(e==null?void 0:e.value)}function Ot(t,e){c=t,f=e,o=f(),O(r),c.firstChild?c.replaceChild(M(o),c.firstChild):c.appendChild(M(o)),L(),n={...r},r={}}let x=[],w=[];function Rt(){let t=f();O(o,t),O(r),O(performance.now()),x=[],w=[],jt(c,t,o),O(performance.now());let e=setTimeout(()=>{clearTimeout(e),S(),w&&xt(w),x&&Dt(x),L(),o=t,n={...r},r={}},0)}function ft(t){return t!==void 0||t!==""}const Q={routeChange:!1,set:t=>{Q.routeChange=t}};window.addEventListener("popstate",()=>Q.set(!0)),window.addEventListener("navigate",()=>Q.set(!0));function jt(t,e,l,i=0){let g=gt(c),E=0,D=null,_=!1,W=null,I=0;Q.routeChange&&(q.clear(),Q.set(!1));const y=q.size;let U=null,F=!1,z=0,tt=0;function lt(a,b,P,H=0){var X;if(!F&&y){if(b!=null&&b.type&&(P!=null&&P.type))return at(b,P);if(b===P)return}if(I++,!ft(P))O("append: "),x.push({p:a,op:"APPEND",c:M(b)});else if(ft(b))if(Tt(b,P))if(a!=null&&a.childNodes[H]){const C=a.childNodes[H];if(x.push({p:a,op:"REPLACE",c:[M(b),C]}),(C==null?void 0:C.nodeType)===1){for(;E<g.length;)if(E++,g[E]===C){const d=C.querySelectorAll("*").length;g.splice(E,d);break}}const K=(X=P==null?void 0:P.props)==null?void 0:X.fragChildLen;if((P==null?void 0:P.type)==="df"&&K)for(let d=K-1;d>=1;--d)x.push({p:a,op:"REMOVE",c:a.childNodes[H+d]}),E+=1}else if(a!=null&&a.appendChild){const C=M(b);C!=null&&C.nodeName?_?x.push({p:W,op:"APPEND",c:C}):x.push({p:a,op:"APPEND",c:C}):x.push({p:a,op:"CONTENT",c:C==null?void 0:C.textContent})}else x.push({p:a==null?void 0:a.parentNode,op:"APPEND",c:M(b)});else b!=null&&b.type&&at(b,P);else{const C=a.childNodes[H];if(x.push({p:a,op:"REMOVE",c:C}),(C==null?void 0:C.nodeType)===1){for(;E<g.length;)if(E++,g[E]===C){const K=C.querySelectorAll("*").length;g.splice(E,K);break}}}}function at(a,b){var H,X,C,K;if((a==null?void 0:a.type)!=="df"?E+=1:(U=`${a.$c}:${a.$p}:${a.key}`,U.split(":")[0],y?q.has(U)&&(F=!0):F||it.has((H=a==null?void 0:a.props)==null?void 0:H.context)&&(F=!0)),F&&z===0){O(a.props);const{fragChildLen:d}=a.props;if(d){let V=E+1;for(let v=0;v<d;++v){let nt=0;O("qc: ",V);const pt=g[V];O(pt),nt=pt.querySelectorAll("*").length,z+=nt,V+=1+nt}tt=E+d+z+1}else z+=g[E+1].querySelectorAll("*").length,O("comparisonsReqd till: ",g[E+z+1]),tt=E+z+1}const P=g[E];if(E===tt&&(F=!1,z=0,tt=0),D!==P){const d=Object.keys(a.props).length,V=Object.keys(b.props).length;if(!(d===V&&d===0)){if(a.props.ignoreNode||a.props.ignoreLater)return;w.push({$target:P,newProps:a.props,oldProps:b.props})}D=P}if((X=a==null?void 0:a.props)!=null&&X.cacheKey){const d=(K=(C=a.children[0])==null?void 0:C.props)==null?void 0:K.__cached,V=d?b.children[0]:null;y&&!d&&(F=!0),lt(g[++E],a.children[0],V,0);return}else{const d=a.children.length,V=b.children.length;d>100&&(_=!0,W=document.createDocumentFragment(),O("have for loop custom component or see how this can be optimized"));for(let v=0;v<d||v<V;v++)lt(P,a.children[v],b.children[v],v)}_&&(O("after for",P),x.push({p:P,op:"APPEND",c:W}),_=!1,W=null)}lt(t,e,l,i),q.clear(),it.clear(),O(I),I=0}function xt(t){for(;t.length;){const e=t.shift();dt(e.$target,e.newProps,e.oldProps),e.$target=null,e.newProps=null,e.oldProps=null}}function Dt(t){var e,l;for(;t.length;){const i=t.shift();switch(i.op){case"APPEND":i.p.appendChild(i.c),i.c=null,i.p=null,i.op=null;break;case"REMOVE":i.p.removeChild(i.c),((e=i.c)==null?void 0:e.nodeType)===1&&requestIdleCallback(()=>{h.unRegisterAllEventListeners(i.c),i.c=null,i.p=null,i.op=null});break;case"REPLACE":i.p.replaceChild(i.c[0],i.c[1]),((l=i.c[1])==null?void 0:l.nodeType)===1&&requestIdleCallback(()=>{h.unRegisterAllEventListeners(i.c[1]),i.c=null,i.p=null,i.op=null});break;case"CONTENT":i.p.textContent=i.c,i.c=null,i.p=null,i.op=null;break}}}return{mount:Ot,forceUpdate:Rt,onMount:B,onCleanup:A,h:Y,df:J}})(),vt=N.mount,Ut=N.forceUpdate,qt=N.onMount,Bt=N.onCleanup,m=N.h,mt={};function gt(s){let r=[s],n=s;function p(){for(;n;){const f=!n.getAttribute("ignorenode");n.firstElementChild&&f?(n=n.firstElementChild,r.push(n)):c()}}function c(){for(;n;){if(n.nextElementSibling){n=n.nextElementSibling,r.push(n);return}n=n.parentElement,n===s&&(n=null)}}return p(),r}function Wt(){var s;return(s=globalThis.scheduler)!=null&&s.yield?scheduler.yield():new Promise(r=>{setTimeout(r,0)})}console.log("check: https://github.com/nanojsx/nano/blob/master/src/components/router.ts");console.log("check: https://codesandbox.io/s/build-own-react-router-v4-mpslz , https://www.youtube.com/watch?v=1knvu0a3k0w");var Ft={VITE_API_HOST:"https://aksh-github.github.io",VITE_BASEPATH:"/pages/data/sanskrit/db",VITE_TS:"/data-ts.json",VITE_WORDS:"/words.json",VITE_VERBS:"/verbs.json",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Z=Ft,zt=()=>{var r;const s=(((r=window==null?void 0:window.location)==null?void 0:r.host)||"localhost")+":sans:";return{updateData:(n,p)=>{localStorage.setItem(s+n,JSON.stringify({ts:Date.now(),d:p}))},get:n=>JSON.parse(localStorage.getItem(s+n))}},st={VERBS:0,WORDS:1},G={words:{d:[],ts:0},verbs:{d:[],ts:0}};let ct=null;const yt=Vt(""),Ht=()=>({row:s})=>{var r,n,p,c,f,o;return m("div",{className:"divrow"},m("h3",null,s==null?void 0:s.ev),m("p",null," ",(r=s==null?void 0:s.sv)==null?void 0:r.join(", ")),m("p",null,(n=s==null?void 0:s.gana)==null?void 0:n.join(", ")),m("p",null,(p=s==null?void 0:s.roop)==null?void 0:p.join(", ")),m("p",null,(c=s==null?void 0:s.lyut)==null?void 0:c.join(", ")),m("p",null,(f=s==null?void 0:s.kta)==null?void 0:f.join(", ")),m("p",null,(o=s==null?void 0:s.mv)==null?void 0:o.join(", ")))},Kt=s=>{var p,c,f,o,u;let r=(c=(p=ct[0]())==null?void 0:p.trim())==null?void 0:c.toLowerCase(),n=(f=s==null?void 0:s.ev)==null?void 0:f.includes(r);if(!n){for(let h=0;h<((o=s==null?void 0:s.sv)==null?void 0:o.length);h++)if((s==null?void 0:s.sv[h].indexOf(r))>-1){n=!0;break}}if(!n){for(let h=0;h<((u=s==null?void 0:s.mv)==null?void 0:u.length);h++)if((s==null?void 0:s.mv[h].indexOf(r))>-1){n=!0;break}}return n},Gt=()=>({row:s})=>{var r,n;return m("li",null,m("h3",null,s==null?void 0:s.ew),m("p",null,(r=s==null?void 0:s.sw)==null?void 0:r.join(", ")),m("p",null,(n=s==null?void 0:s.mw)==null?void 0:n.join(", ")))},Jt=s=>{var p,c,f,o,u;let r=(c=(p=ct[0]())==null?void 0:p.trim())==null?void 0:c.toLowerCase(),n=(f=s==null?void 0:s.ew)==null?void 0:f.includes(r);if(!n){for(let h=0;h<((o=s==null?void 0:s.sw)==null?void 0:o.length);h++)if((s==null?void 0:s.sw[h].indexOf(r))>-1){n=!0;break}}if(!n){for(let h=0;h<((u=s==null?void 0:s.mw)==null?void 0:u.length);h++)if((s==null?void 0:s.mw[h].indexOf(r))>-1){n=!0;break}}return n},k={[st.VERBS]:{title:"Verbs",dkey:"verbs",jsonFile:Z.VITE_VERBS,filterFunc:Kt,RowComponent:Ht},[st.WORDS]:{title:"Words",dkey:"words",jsonFile:Z.VITE_WORDS,filterFunc:Jt,setDatacb:s=>s["Everyday words"].concat(s.home).concat(s["eng other"]),RowComponent:Gt,asList:!0}},Et=(s=!1)=>{const{updateData:r,get:n}=zt(),p=[],c=[];return Object.keys(k).forEach(f=>{const o=n(`${k[f].dkey}`);if(!o||s)p.push(Yt(k[f].jsonFile)),c.push(k[f].dkey);else{const{ts:u,d:h}=o;p.push(Promise.resolve({ts:u,d:h||[]}))}}),Promise.all(p).then(f=>{Object.keys(k).forEach(o=>{var h,R,j,B;let u=((h=f[o])==null?void 0:h.d)||f[o];u=k[o].setDatacb&&!(u!=null&&u.length)?k[o].setDatacb(u):u,(R=u==null?void 0:u.shift)==null||R.call(u),(j=u==null?void 0:u.shift)==null||j.call(u),c.includes(k[o].dkey)&&requestIdleCallback(()=>{r(`${k[o].dkey}`,u),c.splice(c.indexOf(k[o].dkey),1)}),G[`${k[o].dkey}`].d=u,G[`${k[o].dkey}`].ts=((B=f[o])==null?void 0:B.ts)||0})})},Yt=s=>fetch(`${Z.VITE_BASEPATH}${s}`).then(r=>r.json());function Qt({dkey:s}){let r=null,n=()=>[];const p=-1,[c,f]=et(G[`${s}`].d.slice(0,p));return({prop:o,search:u,dkey:h})=>{const{title:R,filterFunc:j,RowComponent:B,asList:A}=k[o];r!==u&&(r=u,r?n=()=>G[`${h}`].d.filter(j):n=()=>[]),console.log("exec",yt.get());const S=(n().length>0?n():c()).map(L=>m(B,{row:L}));return m("div",null,m("h2",{className:"title"},R),n().length===0&&u?m("p",{className:"info"},'No results for your search: "',u,'"'):null,n().length>0&&u?m("p",{className:"info"},"Matching results: ",n().length):null,A?m("ul",{className:"list"},S):m("div",{className:"search"},S))}}function Xt(){const[s,r]=et(0),[n,p]=et(!1),[c,f]=ct=et("");return qt(()=>{console.log("mount for Sans"),Et().then(()=>{p(!0),fetch(`${Z.VITE_BASEPATH}${Z.VITE_TS}?ts=${Date.now()}`).then(o=>o.json()).then(o=>{let u=0;Object.keys(G).forEach(h=>{G[h].ts<o[h]&&(console.log("update for",h),u+=1)}),u>0&&Et(!0)})}).catch(o=>{console.log(o),n(!0)})}),Bt(()=>{console.log("unmount for Sans"),Mt(()=>f(""))}),o=>m("div",{className:"sans"},m("header",{className:"sticky-header"},m("h1",{className:"main-head"},"संस्कृतकोष:"),m("div",{style:{textAlign:"center"}},m("input",{value:c(),type:"text",placeholder:"Search in English or Sanskrit...",onInput:u=>{f(u.target.value)}})),m("p",{className:"tabs"},m("button",{onClick:()=>r(st.VERBS)},"Verbs"),m("button",{onClick:()=>r(st.WORDS)},"Words"))),n()?m("div",{className:"search-wrapper"},m(Zt,{contextdf:yt.get()},m(Qt,{key:k[s()].dkey,dkey:k[s()].dkey,prop:s(),search:c()}))):m("p",null,"Loading..."))}const Zt=()=>({children:s})=>m("div",null,s),$t=document.getElementById("root-vdom");_t(Ut);vt($t,()=>m(Xt,null));
