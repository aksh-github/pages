(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function kt(s,c){let n;return function(...h){const r=()=>(n=null,s.apply(this,h));clearTimeout(n),n=setTimeout(r,c)}}const v=new Set,X=(()=>{let s=null;const c=L=>{s=L},n=L=>{console.warn("untested code"),u=!0,L(),u=!1,o()},h=L=>{f=!0,L(),f=!1};let r=null,o=()=>{},u=!1,f=!1;return{batch:n,registerCallback:(L,P=100)=>{o=L,r=kt(o,P)},state:L=>{let P={...L},d=s;return[T=>T?P[T]:P,T=>{if(console.log("update in state",d),typeof T=="function")P=T(P);else{if(P==T)return;P={...T}}u?d&&v.add(d):f||(d&&v.add(d),r())}]},atom:L=>{let P=L,d=s;return[()=>P,T=>{if(console.log("update in atom",d),typeof T=="function")P=T(P);else{if(P==T)return;P=T}u?d&&v.add(d):f||(d&&v.add(d),r())}]},skipUpdate:h,setCurrComp:c}})(),Tt=X.registerCallback,Y=X.atom,Ot=X.skipUpdate,nt=X.setCurrComp,it=()=>{},K=(()=>{let s=[],c={},n={},h=[],r=null,o=null,u=null;function f(){const t=new WeakMap;return{registerEventListener:(e,l,i,g)=>{t.has(e)||t.set(e,[]),t.get(e).push({type:l,listener:i,options:g})},unregisterEventListener:e=>{if(t.has(e)){const l=t.get(e);for(;l.length;){const{type:i,listener:g,options:C}=l.pop();e.removeEventListener(i,g,C)}}},getEventListeners:e=>t.get(e)||[],unRegisterAllEventListeners:async e=>{const l=rt(e);for(let i=0;i<l.length;i++)p.unregisterEventListener(l[i]),l[i]=null,i%50===0&&await It()}}}const p=new f;let A=null,R=null;function L(t){A=t}function P(t){R=t}function d(){Object.keys(n).forEach(t=>{var e,l;c[t]||((l=(e=n[t]).unMount)==null||l.call(e),n[t].unMount=null,ct[t]&&delete ct[t])})}function G(){for(;s!=null&&s.length;)s.pop()()}function $(t,...e){return e}function T(t,e,...l){var C,D,x,U;let i=null,g;if(Array.isArray(l)&&(l=l.flat()),typeof t=="function"){g=(C=h[h.length-1])==null?void 0:C.n,h.push({n:t==null?void 0:t.name});const V=`${t.name}:${g}:${e==null?void 0:e.key}`;if(n){const M=n[V];M?(i=M.fn,A=M.mount,R=M.unMount):(nt(V),i=t(e,...l),A&&s.push(A),nt(null))}c[V]={fname:t.name,fn:i,mount:A,unMount:R,p:g,key:e==null?void 0:e.key},A=R=null;const y=typeof i=="function"?i({...e,children:l}):i;return h.pop(),y!=null&&y.type?(y.type==="df"&&(e={...e,fragChildLen:y==null?void 0:y.children.length}),{...y,$c:t.name,children:[y],$p:g,key:e==null?void 0:e.key,props:e||{},type:"df"}):Array.isArray(y)?(console.warn("Your component named `",t.name,"` is returning Array, manipulation to this Array is currently NOT supported and can lead to Unexpected behavior"),{$c:t.name,type:"df",children:y,$p:g}):y!=null&&y.$c?{$c:t.name,children:[y],$p:g}:{$c:t.name,value:y,props:e||{},$p:g}}if(t==="df"){let V=0;for(let y=0;y<l.length;++y)((D=l[y])==null?void 0:D.type)==="df"?V+=((U=(x=l[y])==null?void 0:x.props)==null?void 0:U.fragChildLen)||0:V+=1;return{type:t,props:{...e,fragChildLen:V},children:l}}else return{type:t,props:e||{},children:e!=null&&e.ignoreNode?[]:l}}function ot(t,e,l){l?(t.setAttribute(e,l),t[e]=!0):t[e]=!1}function ft(t,e){t.removeAttribute(e),t[e]=!1}function w(t){return/^on/.test(t)}function at(t){return t.slice(2).toLowerCase()}function tt(t){return w(t)||t==="forceUpdate"}function et(t,e,l){tt(e)||(e==="className"?t.setAttribute("class",l):e==="style"?Object.keys(l).forEach(i=>{t.style[i]=l[i]}):e==="ref"?l==null||l(t):e==="ignoreLater"?(t.setAttribute("ignorenode",!0),t.removeAttribute(e.toLowerCase())):typeof l=="boolean"?ot(t,e,l):((e==="value"||e==="htmlFor")&&(t[e]=l),t.setAttribute(e,l)))}function ht(t,e,l){tt(e)||(e==="className"?t.removeAttribute("class"):typeof l=="boolean"?ft(t,e):t.removeAttribute(e))}function pt(t,e){Object.keys(e).forEach(l=>{et(t,l,e[l])})}function mt(t,e,l,i){!l&&l==null?ht(t,e,i):(!i||l!==i)&&et(t,e,l)}function gt(t,e,l={}){const i=Object.assign({},e,l);Object.keys(i).forEach(g=>{mt(t,g,e[g],l[g])})}function Et(t,e){Object.keys(e).forEach(l=>{if(w(l)){const i=at(l);p.registerEventListener(t,i,e[l]),t.addEventListener(i,e[l])}})}const yt=(t,e,...l)=>{function i(C,D){Object.keys(D).forEach(x=>{C.setAttributeNS(null,x,D[x])})}const g=document.createElementNS("http://www.w3.org/2000/svg","svg");i(g,e);for(const C of l){const D=document.createElementNS("http://www.w3.org/2000/svg",C.type);i(D,C.props),g.appendChild(D)}return g};function _(t){if(!(t!=null&&t.type))return t!=null&&t.$c?t.children?_(t.children[0]):document.createTextNode((t==null?void 0:t.value)==null||(t==null?void 0:t.value)==null?"":t==null?void 0:t.value):document.createTextNode(t==null||t==null?"":t);if((t==null?void 0:t.type)==="df"){const l=document.createDocumentFragment();return t.children.map(_).forEach(l.appendChild.bind(l)),l}if(t.type==="svg")return yt(t.type,t.props,...t.children);const e=document.createElement(t.type);return t!=null&&t.$c||(pt(e,t.props),Et(e,t.props)),t.children.map(_).forEach(e.appendChild.bind(e)),e}function Ct(t,e){return(t==null?void 0:t.type)===(e==null?void 0:e.type)&&(t==null?void 0:t.type)==="df"?(t==null?void 0:t.$c)!==(e==null?void 0:e.$c):typeof t!=typeof e||!(t!=null&&t.type)&&t!==e||(t==null?void 0:t.type)!==(e==null?void 0:e.type)||(t==null?void 0:t.value)!==(e==null?void 0:e.value)}function bt(t,e){r=t,o=e,u=o(),r.firstChild?r.replaceChild(_(u),r.firstChild):r.appendChild(_(u)),G(),n={...c},c={}}let j=[],J=[];function St(){let t=o();it(performance.now()),j=[],J=[],Lt(r,t,u),it(performance.now());let e=setTimeout(()=>{clearTimeout(e),d(),J&&Pt(J),j&&At(j),G(),u=t,n={...c},c={}},0)}function st(t){return t!==void 0||t!==""}const F={routeChange:!1,set:t=>{F.routeChange=t}};window.addEventListener("popstate",()=>F.set(!0)),window.addEventListener("navigate",()=>F.set(!0));function Lt(t,e,l,i=0){let g=rt(r),C=0,D=null,x=!1,U=null;F.routeChange&&(v.clear(),F.set(!1));let V=v.size,y=v.values().next().value,M=!1;function N(a,b,S,B=0){var H;if(V&&!M&&b!=null&&b.type&&S!=null&&S.type)return lt(b,S);if(!st(S))j.push({p:a,op:"APPEND",c:_(b)});else if(st(b))if(Ct(b,S))if(a!=null&&a.childNodes[B]){const E=a.childNodes[B];if(j.push({p:a,op:"REPLACE",c:[_(b),E]}),(E==null?void 0:E.nodeType)===1){for(;C<g.length;)if(C++,g[C]===E){const I=E.querySelectorAll("*").length;g.splice(C,I);break}}const k=(H=S==null?void 0:S.props)==null?void 0:H.fragChildLen;if((S==null?void 0:S.type)==="df"&&k)for(let I=k-1;I>=1;--I)j.push({p:a,op:"REMOVE",c:a.childNodes[B+I]}),C+=1}else if(a!=null&&a.appendChild){const E=_(b);E!=null&&E.nodeName?x?j.push({p:U,op:"APPEND",c:E}):j.push({p:a,op:"APPEND",c:E}):j.push({p:a,op:"CONTENT",c:E==null?void 0:E.textContent})}else j.push({p:a==null?void 0:a.parentNode,op:"APPEND",c:_(b)});else b!=null&&b.type&&lt(b,S);else{const E=a.childNodes[B];if(j.push({p:a,op:"REMOVE",c:E}),(E==null?void 0:E.nodeType)===1){for(;C<g.length;)if(C++,g[C]===E){const k=E.querySelectorAll("*").length;g.splice(C,k);break}}}}function lt(a,b){var B,H,E;if((a==null?void 0:a.type)!=="df")C+=1;else{let k=`${a.$c}:${a.$p}:${a.key}`,I=k.split(":")[0];k===y||a.$p===I||a.key!==b.key?M=!0:M=!1}const S=g[C];if(D!==S){const k=Object.keys(a.props).length,I=Object.keys(b.props).length;if(!(k===I&&k===0)){if(a.props.ignoreNode||a.props.ignoreLater)return;J.push({$target:S,newProps:a.props,oldProps:b.props})}D=S}if((B=a==null?void 0:a.props)!=null&&B.cacheKey){const k=(E=(H=a.children[0])==null?void 0:H.props)!=null&&E.__cached?b.children[0]:null;N(g[++C],a.children[0],k,0);return}else{const k=a.children.length,I=b.children.length;k>100&&(x=!0,U=document.createDocumentFragment());for(let W=0;W<k||W<I;W++)N(S,a.children[W],b.children[W],W)}x&&(j.push({p:S,op:"APPEND",c:U}),x=!1,U=null)}N(t,e,l,i),v.clear()}function Pt(t){for(;t.length;){const e=t.shift();gt(e.$target,e.newProps,e.oldProps)}}function At(t){var e,l;for(;t.length;){const i=t.shift();switch(i.op){case"APPEND":i.p.appendChild(i.c);break;case"REMOVE":i.p.removeChild(i.c),((e=i.c)==null?void 0:e.nodeType)===1&&requestIdleCallback(()=>{p.unRegisterAllEventListeners(i.c),i.c=null});break;case"REPLACE":i.p.replaceChild(i.c[0],i.c[1]),((l=i.c[1])==null?void 0:l.nodeType)===1&&requestIdleCallback(()=>{p.unRegisterAllEventListeners(i.c[1]),i.c[1]=null});break;case"CONTENT":i.p.textContent=i.c;break}}}return{mount:bt,forceUpdate:St,onMount:L,onCleanup:P,h:T,df:$}})(),dt=K.mount,jt=K.forceUpdate,Rt=K.onMount,Dt=K.onCleanup,m=K.h,ct={};function rt(s){let c=[s],n=s;function h(){for(;n;){const o=!n.getAttribute("ignorenode");n.firstElementChild&&o?(n=n.firstElementChild,c.push(n)):r()}}function r(){for(;n;){if(n.nextElementSibling){n=n.nextElementSibling,c.push(n);return}n=n.parentElement,n===s&&(n=null)}}return h(),c}function It(){var s;return(s=globalThis.scheduler)!=null&&s.yield?scheduler.yield():new Promise(c=>{setTimeout(c,0)})}console.log("check: https://github.com/nanojsx/nano/blob/master/src/components/router.ts");console.log("check: https://codesandbox.io/s/build-own-react-router-v4-mpslz , https://www.youtube.com/watch?v=1knvu0a3k0w");var xt={VITE_API_HOST:"https://aksh-github.github.io",VITE_BASEPATH:"/pages/data/sanskrit/db",VITE_TS:"/data-ts.json",VITE_WORDS:"/words.json",VITE_VERBS:"/verbs.json",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const z=xt,_t=()=>{var c;const s=(((c=window==null?void 0:window.location)==null?void 0:c.host)||"localhost")+":sans:";return{updateData:(n,h)=>{localStorage.setItem(s+n,JSON.stringify({ts:Date.now(),d:h}))},get:n=>JSON.parse(localStorage.getItem(s+n))}},Q={VERBS:0,WORDS:1},q={words:{d:[],ts:0},verbs:{d:[],ts:0}};let Z=null;const Vt=()=>({row:s})=>{var c,n,h,r,o,u;return m("div",{className:"divrow"},m("h3",null,s==null?void 0:s.ev),m("p",null," ",(c=s==null?void 0:s.sv)==null?void 0:c.join(", ")),m("p",null,(n=s==null?void 0:s.gana)==null?void 0:n.join(", ")),m("p",null,(h=s==null?void 0:s.roop)==null?void 0:h.join(", ")),m("p",null,(r=s==null?void 0:s.lyut)==null?void 0:r.join(", ")),m("p",null,(o=s==null?void 0:s.kta)==null?void 0:o.join(", ")),m("p",null,(u=s==null?void 0:s.mv)==null?void 0:u.join(", ")))},Mt=s=>{var h,r,o,u,f;let c=(r=(h=Z[0]())==null?void 0:h.trim())==null?void 0:r.toLowerCase(),n=(o=s==null?void 0:s.ev)==null?void 0:o.includes(c);if(!n){for(let p=0;p<((u=s==null?void 0:s.sv)==null?void 0:u.length);p++)if((s==null?void 0:s.sv[p].indexOf(c))>-1){n=!0;break}}if(!n){for(let p=0;p<((f=s==null?void 0:s.mv)==null?void 0:f.length);p++)if((s==null?void 0:s.mv[p].indexOf(c))>-1){n=!0;break}}return n},vt=()=>({row:s})=>{var c,n;return m("li",null,m("h3",null,s==null?void 0:s.ew),(c=s==null?void 0:s.sw)==null?void 0:c.join(", "),", ",(n=s==null?void 0:s.mw)==null?void 0:n.join(", "))},Ut=s=>{var h,r,o,u,f;let c=(r=(h=Z[0]())==null?void 0:h.trim())==null?void 0:r.toLowerCase(),n=(o=s==null?void 0:s.ew)==null?void 0:o.includes(c);if(!n){for(let p=0;p<((u=s==null?void 0:s.sw)==null?void 0:u.length);p++)if((s==null?void 0:s.sw[p].indexOf(c))>-1){n=!0;break}}if(!n){for(let p=0;p<((f=s==null?void 0:s.mw)==null?void 0:f.length);p++)if((s==null?void 0:s.mw[p].indexOf(c))>-1){n=!0;break}}return n},O={[Q.VERBS]:{title:"Verbs",dkey:"verbs",jsonFile:z.VITE_VERBS,filterFunc:Mt,RowComponent:Vt},[Q.WORDS]:{title:"Words",dkey:"words",jsonFile:z.VITE_WORDS,filterFunc:Ut,setDatacb:s=>s["Everyday words"].concat(s.home).concat(s["eng other"]),RowComponent:vt,asList:!0}},ut=(s=!1)=>{const{updateData:c,get:n}=_t(),h=[],r=[];return Object.keys(O).forEach(o=>{const u=n(`${O[o].dkey}`);if(!u||s)h.push(Bt(O[o].jsonFile)),r.push(O[o].dkey);else{const{ts:f,d:p}=u;h.push(Promise.resolve({ts:f,d:p||[]}))}}),Promise.all(h).then(o=>{Object.keys(O).forEach(u=>{var p,A,R,L;let f=((p=o[u])==null?void 0:p.d)||o[u];f=O[u].setDatacb&&!(f!=null&&f.length)?O[u].setDatacb(f):f,(A=f==null?void 0:f.shift)==null||A.call(f),(R=f==null?void 0:f.shift)==null||R.call(f),r.includes(O[u].dkey)&&requestIdleCallback(()=>{c(`${O[u].dkey}`,f),r.splice(r.indexOf(O[u].dkey),1)}),q[`${O[u].dkey}`].d=f,q[`${O[u].dkey}`].ts=((L=o[u])==null?void 0:L.ts)||0})})},Bt=s=>fetch(`${z.VITE_BASEPATH}${s}`).then(c=>c.json());function Wt({dkey:s}){let c=null,n=()=>[];const[h,r]=Y(q[`${s}`].d.slice(0,20));return({title:o,RowComponent:u,asList:f,filterFunc:p})=>{let A=Z[0]();c!==A&&(c=A,c?n=()=>q[`${s}`].d.filter(p):n=()=>[]),console.log("exec");const R=(n().length>0?n():h()).map(L=>m(u,{row:L}));return m("div",null,m("h2",{className:"title"},o),n().length===0&&A?m("p",{className:"info"},'No results for your search: "',A,'"'):null,f?m("ul",{className:"list"},R):m("div",{className:"search"},R))}}function qt(){return({currTab:s})=>m("div",{className:"search-wrapper"},m(Wt,{key:O[s].dkey,...O[s]}))}function Ft(){const[s,c]=Y(0),[n,h]=Y(!1),[r,o]=Z=Y("");return Rt(()=>{console.log("mount for Sans"),ut().then(()=>{h(!0),fetch(`${z.VITE_BASEPATH}${z.VITE_TS}?ts=${Date.now()}`).then(u=>u.json()).then(u=>{let f=0;Object.keys(q).forEach(p=>{q[p].ts<u[p]&&(console.log("update for",p),f+=1)}),f>0&&ut(!0)})}).catch(u=>{console.log(u),n(!0)})}),Dt(()=>{console.log("unmount for Sans"),Ot(()=>o(""))}),u=>m("div",{className:"sans"},m("header",{className:"sticky-header"},m("h1",{className:"main-head"},"संस्कृतकोष:"),m("div",{style:{textAlign:"center"}},m("input",{value:r(),type:"text",placeholder:"Search in English or Sanskrit...",onInput:f=>o(f.target.value)})),m("p",{className:"tabs"},m("button",{onClick:()=>c(Q.VERBS)},"Verbs"),m("button",{onClick:()=>c(Q.WORDS)},"Words"))),n()?m(qt,{currTab:s()}):m("p",null,"Loading..."))}const Ht=document.getElementById("root-vdom");Tt(jt);dt(Ht,()=>m(Ft,null));
